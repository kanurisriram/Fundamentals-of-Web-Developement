<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>StockPro Ultimate</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { margin:0; font-family:Arial; display:flex; background:#0d1117; color:white;}
.sidebar { width:220px; background:#111827; padding:20px; height:100vh;}
.sidebar h2 { color:orange; }
.sidebar a {
    display:block; padding:10px; margin:8px 0;
    color:#ccc; text-decoration:none; border-radius:6px; cursor:pointer;
}
.sidebar a:hover { background:#1f2937; }
.sidebar a.active { background:#2563eb; color:white; }

.main { flex:1; padding:25px; }

.section { display:none; }
.section.active { display:block; }

.cards { display:grid; grid-template-columns:repeat(4,1fr); gap:15px; margin-bottom:20px;}
.card { background:#161b22; padding:15px; border-radius:10px; }

table { width:100%; border-collapse:collapse; background:#161b22; }
th,td { padding:10px; border-bottom:1px solid #333; }

input,select,button { padding:6px; margin:5px; }
button { background:orange; border:none; border-radius:4px; cursor:pointer; }

canvas { background:#161b22; padding:10px; border-radius:10px; margin-top:15px; }
</style>
</head>

<body>

<div class="sidebar">
    <h2>StockPro</h2>
    <a onclick="showSection(event,'dashboard')" class="active">Dashboard</a>
    <a onclick="showSection(event,'inventory')">Inventory</a>
    <a onclick="showSection(event,'orders')">Orders</a>
    <a onclick="showSection(event,'customers')">Customers</a>
    <a onclick="showSection(event,'reports')">Reports</a>
    <a onclick="showSection(event,'settings')">Settings</a>
</div>

<div class="main">

<!-- DASHBOARD -->
<div id="dashboard" class="section active">
    <div class="cards">
        <div class="card"><h4>Total Sales</h4><p id="totalSales">0</p></div>
        <div class="card"><h4>Total Orders</h4><p id="totalOrders">0</p></div>
        <div class="card"><h4>Total Products</h4><p id="totalProducts">0</p></div>
        <div class="card"><h4>Low Stock</h4><p id="lowStock">0</p></div>
    </div>
    <canvas id="revenueChart"></canvas>
</div>

<!-- INVENTORY -->
<div id="inventory" class="section">
    <h3>Add Product</h3>
    <input id="pname" placeholder="Product Name">
    <input id="pstock" type="number" placeholder="Stock">
    <select id="pcategory">
        <option>Laptop</option>
        <option>Mobile</option>
        <option>Electronics</option>
        <option>Accessories</option>
    </select>
    <button onclick="addProduct()">Add</button>

    <h3>Product List</h3>
    <table>
        <thead>
            <tr><th>Name</th><th>Stock</th><th>Category</th><th>Action</th></tr>
        </thead>
        <tbody id="productTable"></tbody>
    </table>
</div>

<!-- ORDERS -->
<div id="orders" class="section">
    <h3>Add Order</h3>
    <input id="ocustomer" placeholder="Customer Name">
    <input id="oamount" type="number" placeholder="Amount">
    <select id="ostatus">
        <option>Completed</option>
        <option>Pending</option>
    </select>
    <button onclick="addOrder()">Add</button>

    <h3>Order List</h3>
    <table>
        <thead>
            <tr><th>ID</th><th>Customer</th><th>Status</th><th>Amount</th></tr>
        </thead>
        <tbody id="orderTable"></tbody>
    </table>
</div>

<!-- CUSTOMERS -->
<div id="customers" class="section">
    <h3>Customers</h3>
    <p>Customer module coming soon.</p>
</div>

<!-- REPORTS -->
<div id="reports" class="section">
    <h3>Reports</h3>
    <p>Reports & analytics coming soon.</p>
</div>

<!-- SETTINGS -->
<<div id="settings" class="section">
    <h3>System Settings</h3>

    <label>Store Name:</label><br>
    <input id="storeName" placeholder="Enter store name"><br>

    <label>Currency:</label><br>
    <select id="currency">
        <option value="₹">₹ INR</option>
        <option value="$">$ USD</option>
        <option value="€">€ EUR</option>
    </select><br>

    <label>Low Stock Alert Limit:</label><br>
    <input id="lowStockLimit" type="number" placeholder="10"><br>

    <label>
        <input type="checkbox" id="darkModeToggle">
        Enable Dark Mode
    </label><br><br>

    <button onclick="saveSettings()">Save Settings</button>
    <button onclick="resetAll()">Reset All Data</button>
</div>

</div>

<script>
let products = JSON.parse(localStorage.getItem("products")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

/* SAMPLE DATA */
if(products.length===0){
    products=[
        {id:1,name:"Dell Laptop",stock:25,category:"Laptop"},
        {id:2,name:"iPhone 14",stock:5,category:"Mobile"}
    ];
    orders=[
        {id:101,customer:"Vijay",amount:2000,status:"Pending"},
        {id:102,customer:"Arjun",amount:45000,status:"Completed"}
    ];
    saveAll();
}

function saveAll(){
    localStorage.setItem("products",JSON.stringify(products));
    localStorage.setItem("orders",JSON.stringify(orders));
}

function showSection(e,id){
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll(".sidebar a").forEach(a=>a.classList.remove("active"));
    e.target.classList.add("active");
}

/* PRODUCT FUNCTIONS */
function addProduct(){
    let name=document.getElementById("pname").value;
    let stock=document.getElementById("pstock").value;
    let cat=document.getElementById("pcategory").value;
    if(!name||!stock)return alert("Fill all fields");
    products.push({id:Date.now(),name,stock:Number(stock),category:cat});
    saveAll();
    renderProducts();
    updateDashboard();
}

function renderProducts(){
    let table=document.getElementById("productTable");
    table.innerHTML="";
    products.forEach(p=>{
        table.innerHTML+=`
        <tr>
            <td>${p.name}</td>
            <td>${p.stock}</td>
            <td>${p.category}</td>
            <td><button onclick="deleteProduct(${p.id})">Delete</button></td>
        </tr>`;
    });
}

function deleteProduct(id){
    products=products.filter(p=>p.id!==id);
    saveAll();
    renderProducts();
    updateDashboard();
}

/* ORDER FUNCTIONS */
function addOrder(){
    let c=document.getElementById("ocustomer").value;
    let a=document.getElementById("oamount").value;
    let s=document.getElementById("ostatus").value;
    if(!c||!a)return alert("Fill all fields");
    orders.push({id:Date.now(),customer:c,amount:Number(a),status:s});
    saveAll();
    renderOrders();
    updateDashboard();
}

function renderOrders(){
    let table=document.getElementById("orderTable");
    table.innerHTML="";
    orders.forEach(o=>{
        table.innerHTML+=`
        <tr>
            <td>#${o.id}</td>
            <td>${o.customer}</td>
            <td>${o.status}</td>
            <td>₹${o.amount}</td>
        </tr>`;
    });
}

/* DASHBOARD UPDATE */
function updateDashboard(){
    let totalSales=orders.reduce((sum,o)=>sum+o.amount,0);
    document.getElementById("totalSales").innerText="₹"+totalSales;
    document.getElementById("totalOrders").innerText=orders.length;
    document.getElementById("totalProducts").innerText=products.length;
    document.getElementById("lowStock").innerText=
        products.filter(p=>p.stock<10).length;

    revenueChart.data.datasets[0].data=orders.map(o=>o.amount);
    revenueChart.update();
}

/* CHART */
let ctx=document.getElementById("revenueChart");
let revenueChart=new Chart(ctx,{
    type:'bar',
    data:{
        labels:["Order1","Order2","Order3","Order4"],
        datasets:[{
            label:"Revenue",
            data:orders.map(o=>o.amount),
            backgroundColor:"orange"
        }]
    },
    options:{
        plugins:{legend:{labels:{color:"white"}}},
        scales:{
            x:{ticks:{color:"white"}},
            y:{ticks:{color:"white"}}
        }
    }
});

renderProducts();
renderOrders();
updateDashboard();
</script>

</body>
</html>
